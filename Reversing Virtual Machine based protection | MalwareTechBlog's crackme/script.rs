use std::fs;
fn main() {
  let mut file_contents: Vec<u8> = fs::read("ram.bin").unwrap();
  let mut byte_1: u8;
  let mut byte_2: u8;
  let mut byte_3: u8;

  let mut tmp: u8 = 0;

  for i in (0..file_contents.len()).step_by(3) {
    byte_1 = file_contents[i + 0xff];
    byte_2 = file_contents[i + 1 + 0xff];
    byte_3 = file_contents[i + 2 + 0xff];

    match byte_1 {
      1 => {
        file_contents[byte_2 as usize] = byte_3;
      },
      2 => {
        tmp = file_contents[byte_2 as usize];
      },
      3 => {
        file_contents[byte_2 as usize] ^= tmp;
        print!("{}", file_contents[byte_2 as usize] as char);
      },
      _ => {
        break;
      },
    };
  }
}
